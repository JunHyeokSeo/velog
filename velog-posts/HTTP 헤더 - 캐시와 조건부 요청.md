<h1 id="μΊμ‹">μΊμ‹</h1>
<h2 id="μΊμ‹-λ―Έμ‚¬μ©">μΊμ‹ λ―Έμ‚¬μ©</h2>
<p>λ°μ΄ν„°κ°€ λ³€κ²½λμ§€ μ•μ•„λ„ κ³„μ† λ„¤νΈμ›ν¬λ¥Ό ν†µν•΄μ„ λ°μ΄ν„°λ¥Ό λ‹¤μ΄λ΅λ“ λ°›μ•„μ•Ό ν•λ‹¤.</p>
<p>μΈν„°λ„· λ„¤νΈμ›ν¬λ” λ§¤μ° λλ¦¬κ³  λΉ„μ‹Έλ‹¤.</p>
<p>λΈλΌμ°μ € λ΅λ”© μ†λ„κ°€ λλ¦¬λ‹¤.</p>
<p>λλ¦° μ‚¬μ©μ κ²½ν—</p>
<h2 id="μΊμ‹-μ‚¬μ©">μΊμ‹ μ‚¬μ©</h2>
<p>μΊμ‹ λ•λ¶„μ— μΊμ‹ κ°€λ¥ μ‹κ°„λ™μ• λ„¤νΈμ›ν¬λ¥Ό μ‚¬μ©ν•μ§€ μ•μ•„λ„ λλ‹¤.</p>
<p>λΉ„μ‹Ό λ„¤νΈμ›ν¬ μ‚¬μ©λ‰μ„ μ¤„μΌ μ μλ‹¤.</p>
<p>λΈλΌμ°μ € λ΅λ”© μ†λ„κ°€ λ§¤μ° λΉ λ¥΄λ‹¤.</p>
<p>λΉ λ¥Έ μ‚¬μ©μ κ²½ν—</p>
<h2 id="μΊμ‹-μ μ–΄-ν—¤λ”">μΊμ‹ μ μ–΄ ν—¤λ”</h2>
<blockquote>
<p><code>Cache-Control:</code> μΊμ‹ μ μ–΄</p>
<p><code>Pragma:</code> μΊμ‹ μ μ–΄(ν•μ„ νΈν™) </p>
<p><code>Expires:</code> μΊμ‹ μ ν¨ κΈ°κ°„(ν•μ„ νΈν™)</p>
</blockquote>
<h3 id="cache-control">Cache-Control</h3>
<aside>
π’΅ Cache-Control ν—¤λ”λ§μΌλ΅λ„ μΊμ‹λ¥Ό μ μ–΄ν•  μ μλ‹¤

<p>λ‹¤λ§, ν•μ„ λ²„μ „μ λΈλΌμ°μ €λ¥Ό νΈν™ν•κΈ° μ„ν•΄ <code>Pragma, Expires</code>λ¥Ό κ°™μ΄ μ‚¬μ©ν•λ‹¤</p>
</aside>

<blockquote>
<p>Cache-Control: max-age  <code>(μΊμ‹ μ ν¨ μ‹κ°„, μ΄λ‹¨μ„)</code></p>
<p>Cache-Control: no-cache <code>(λ°μ΄ν„°λ” μΊμ‹ν•΄λ„ λμ§€λ§, ν•­μƒ μ› μ„λ²„μ— κ²€μ¦ν•κ³  μ‚¬μ©)</code></p>
<p>Cache-Control: no-store   <code>(μ €μ¥ν•λ©΄ μ•λ¨, λ©”λ¨λ¦¬μ—μ„ μ‚¬μ©ν•κ³  μµλ€ν• λΉ¨λ¦¬ μ‚­μ )</code></p>
</blockquote>
<h2 id="μΊμ‹-μ‹κ°„-μ΄κ³Ό">μΊμ‹ μ‹κ°„ μ΄κ³Ό</h2>
<p>μΊμ‹ μ ν¨ μ‹κ°„μ΄ μ΄κ³Όν•λ©΄, μ„λ²„λ¥Ό ν†µν•΄ λ°μ΄ν„°λ¥Ό λ‹¤μ‹ μ΅°νν•κ³ , μΊμ‹λ¥Ό κ°±μ‹ ν•λ‹¤.</p>
<p>μ΄λ• λ‹¤μ‹ λ„¤νΈμ›ν¬ λ‹¤μ΄λ΅λ“κ°€ λ°μƒν•λ‹¤.</p>
<p>μΊμ‹ μ ν¨ μ‹κ°„μ΄ μ΄κ³Όν•΄μ„ μ„λ²„μ— λ‹¤μ‹ μ”μ²­ν•λ©΄ λ‘ κ°€μ§€ μƒν™©μ΄ λ‚νƒ€λ‚λ‹¤</p>
<ol>
<li>μ„λ²„μ—μ„ κΈ°μ΅΄ λ°μ΄ν„°λ¥Ό λ³€κ²½ν•¨</li>
<li><code>μ„λ²„μ—μ„ κΈ°μ΅΄ λ°μ΄ν„°λ¥Ό λ³€κ²½ν•μ§€ μ•μ</code></li>
</ol>
<h3 id="μΊμ‹-λ§λ£-ν›„μ—λ„-μ„λ²„μ—μ„-λ°μ΄ν„°λ¥Ό-λ³€κ²½ν•μ§€-μ•μ•λ‹¤λ©΄">μΊμ‹ λ§λ£ ν›„μ—λ„ μ„λ²„μ—μ„ λ°μ΄ν„°λ¥Ό λ³€κ²½ν•μ§€ μ•μ•λ‹¤λ©΄?</h3>
<p>λ°μ΄ν„°λ¥Ό μƒλ΅ μ „μ†΅ν•λ” λ€μ‹ μ— μ €μ¥ν•΄λ‘μ—λ μΊμ‹λ¥Ό μ¬μ‚¬μ© ν•  μ μλ‹¤</p>
<p>λ‹¨, ν΄λΌμ΄μ–ΈνΈμ λ°μ΄ν„°μ™€ μ„λ²„μ λ°μ΄ν„°κ°€ κ°™λ‹¤λ” μ‚¬μ‹¤μ„ ν™•μΈν•  μ μλ” λ°©λ²• ν•„μ”</p>
<p>β‡’ <code>κ²€μ¦ν—¤λ”</code></p>
<h1 id="κ²€μ¦-ν—¤λ”">κ²€μ¦ ν—¤λ”</h1>
<p>μΊμ‹λ¥Ό μ¬μ‚¬μ© ν•κΈ° μ„ν• <code>κ²€μ¦ν—¤λ”</code>μ™€ <code>μ΅°κ±΄λ¶€ μ”μ²­</code>μ€ ν¬κ² λ‘κ°€μ§€ ν•νƒκ°€ μ΅΄μ¬ν•λ‹¤</p>
<ol>
<li>Last-Modified, If-Modified-Since</li>
<li>ETag, If-None-Match</li>
</ol>
<h2 id="last-modified-if-modified-since">Last-Modified, if-Modified-Since</h2>
<blockquote>
<p><code>κ²€μ¦ν—¤λ”:</code> Last-Modified</p>
<p><code>μ΅°κ±΄λ¶€ μ”μ²­:</code> if-Modified-Since</p>
</blockquote>
<h3 id="μ‹λ‚λ¦¬μ¤">μ‹λ‚λ¦¬μ¤</h3>
<ol>
<li><p>ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ— λ°μ΄ν„° μ”μ²­</p>
</li>
<li><p>μ„λ²„μΈ΅ μ‘λ‹µμ— μΊμ‹ κ΄€λ ¨ ν—¤λ”μ™€ <code>Last-Modified</code> ν—¤λ” μ¶”κ°€</p>
<p> ν—¤λ”μ κ°’μ€ Dataμ μµμΆ… μμ •μΌ</p>
</li>
<li><p>λΈλΌμ°μ € μΊμ‹μ— μ‘λ‹µ κ²°κ³Ό<code>(Data λ° μµμΆ… μμ •μΌ ν¬ν•¨)</code>λ¥Ό μ €μ¥</p>
</li>
<li><p>λΈλΌμ°μ € μΊμ‹μ— Data μ”μ²­ λ° κΈ°κ°„ λ§λ£λ΅ μΈν• μ¤λ¥ λ°μƒ</p>
</li>
<li><p>μ„λ²„μ— λ°μ΄ν„° μ”μ²­(μ”μ²­ ν¨ν‚·μ— <code>if-modified-since</code>ν—¤λ” μ¶”κ°€)</p>
<p> if-modified-sinceμ κ°’μΌλ΅ <code>Last-Modified</code> κ°’(μΊμ‹ λ°μ΄ν„°μ μµμΆ… μμ •μΌ) μ‚¬μ©</p>
</li>
<li><p>μ„λ²„λ” <code>if-modified-since</code>μ™€ Dataμ μµμΆ… μμ •μΌμ„ λΉ„κµ</p>
</li>
<li><p>λ³€κ²½λμ§€ μ•μ•λ‹¤λ©΄ <code>304 Not Modified</code> μƒνƒμ ν¨ν‚·μ„ λ³΄λ‚Έλ‹¤<code>(λ³€κ²½λλ©΄ 200 OK)</code></p>
</li>
<li><p>ν΄λΌμ΄μ–ΈνΈλ” λΈλΌμ°μ € μΊμ‹μ—μ„ λ‹¤μ‹ μ΅°ν<code>(3xx ν¨ν‚·μ€ μλ™ λ¦¬λ‹¤μ΄λ ‰μ…)</code></p>
</li>
</ol>
<h3 id="μ •λ¦¬">μ •λ¦¬</h3>
<p>μΊμ‹ μ ν¨ μ‹κ°„μ΄ μ΄κ³Όν•΄λ„, μ„λ²„μ λ°μ΄ν„°κ°€ κ°±μ‹ λμ§€ μ•μΌλ©΄
<code>304 Not Modified + ν—¤λ” λ©”νƒ€ μ •λ³΄λ§ μ‘λ‹µ (λ°”λ””X)</code></p>
<p>ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„κ°€ λ³΄λ‚Έ <code>μ‘λ‹µ ν—¤λ” μ •λ³΄λ΅ μΊμ‹μ λ©”νƒ€ μ •λ³΄λ¥Ό κ°±μ‹ </code></p>
<p>ν΄λΌμ΄μ–ΈνΈλ” μΊμ‹μ— μ €μ¥λμ–΄ μλ” λ°μ΄ν„° μ¬ν™μ©</p>
<p>κ²°κ³Όμ μΌλ΅ λ„¤νΈμ›ν¬ λ‹¤μ΄λ΅λ“κ°€ λ°μƒν•μ§€λ§ μ©λ‰μ΄ μ μ€ ν—¤λ” μ •λ³΄λ§ λ‹¤μ΄λ΅λ“ λ§¤μ° μ‹¤μ©μ μΈ ν•΄κ²°μ±…</p>
<h2 id="etag-if-none-match">ETag, If-None-Match</h2>
<blockquote>
<p><code>κ²€μ¦ν—¤λ”:</code> ETag</p>
<p><code>μ΅°κ±΄λ¶€ μ”μ²­:</code> If-None-Match</p>
</blockquote>
<h3 id="last-modified-if-modified-since-λ‹¨μ ">Last-Modified, if-Modified-Since λ‹¨μ </h3>
<p>1μ΄ λ―Έλ§ λ‹¨μ„λ΅ μΊμ‹ μ΅°μ •μ΄ λ¶κ°€λ¥</p>
<p>λ‚ μ§ κΈ°λ°μ λ΅μ§ μ‚¬μ© β‡’ λ‚ μ§κ°€ λ‹¤λ¥΄μ§€λ§ λ°μ΄ν„°κ°€ λ‘κ°™μ€ κ²½μ° λ™μΌν• λ°μ΄ν„°λ¥Ό λ‹¤μ‹ μ „μ†΅</p>
<p>μ„λ²„μ—μ„ λ³„λ„μ μΊμ‹ λ§¤μ»¤λ‹μ¦μ„ μ‚¬μ©ν•κ³  μ‹¶μ€ κ²½μ° κµ¬ν„ λ¶κ°€λ¥</p>
<p>β‡’ <code>ETag, If-None-Match</code> μ‚¬μ©</p>
<h3 id="etag">ETag</h3>
<p>μΊμ‹μ© λ°μ΄ν„°μ— μ„μμ κ³ μ ν• λ²„μ „ μ΄λ¦„μ„ λ‹¬μ•„λ‘ </p>
<p>λ°μ΄ν„°κ°€ λ³€κ²½λλ©΄ μ΄λ¦„μ„ λ°”κΏ”μ„ Hashλ¥Ό λ‹¤μ‹ μƒμ„±</p>
<p>λ‹¨μν•κ², ETagλ§ λ³΄λ‚΄μ„ κ°™μΌλ©΄ μ μ§€, λ‹¤λ¥΄λ©΄ λ‹¤μ‹ λ°›κΈ°</p>
<h3 id="μ‹λ‚λ¦¬μ¤-1">μ‹λ‚λ¦¬μ¤</h3>
<ol>
<li><p>ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ— λ°μ΄ν„° μ”μ²­</p>
</li>
<li><p>μ„λ²„μΈ΅ μ‘λ‹µμ— μΊμ‹ κ΄€λ ¨ ν—¤λ”μ™€ <code>ETag</code> ν—¤λ” μ¶”κ°€</p>
<p> ETagμ κ°’μ€ ν•΄λ‹Ή Data κ³ μ μ λ²„μ „ μ΄λ¦„(λ§¤μ»¤λ‹μ¦μ— λ”°λΌ λ‹¬λΌμ§)</p>
</li>
<li><p>λΈλΌμ°μ € μΊμ‹μ— μ‘λ‹µ κ²°κ³Ό<code>(ETag ν¬ν•¨)</code>λ¥Ό μ €μ¥</p>
</li>
<li><p>λΈλΌμ°μ € μΊμ‹μ— Data μ”μ²­ λ° κΈ°κ°„ λ§λ£λ΅ μΈν• μ¤λ¥ λ°μƒ</p>
</li>
<li><p>μ„λ²„μ— λ°μ΄ν„° μ”μ²­(μ”μ²­ ν¨ν‚·μ— <code>if-none-match</code>ν—¤λ” μ¶”κ°€)</p>
<p> if-none-matchμ κ°’μΌλ΅ <code>ETag</code>(Data κ³ μ μ λ²„μ „ μ΄λ¦„) μ‚¬μ©</p>
</li>
<li><p>μ„λ²„λ” <code>if-none-match</code>μ™€ μ„λ²„ λ‚΄λ¶€μ <code>ETag</code>λ¥Ό λΉ„κµ</p>
</li>
<li><p>λ³€κ²½λμ§€ μ•μ•λ‹¤λ©΄ <code>304 Not Modified</code> μƒνƒμ ν¨ν‚·μ„ λ³΄λ‚Έλ‹¤<code>(λ³€κ²½λλ©΄ 200 OK)</code></p>
</li>
<li><p>ν΄λΌμ΄μ–ΈνΈλ” λΈλΌμ°μ € μΊμ‹μ—μ„ λ‹¤μ‹ μ΅°ν<code>(3xx ν¨ν‚·μ€ μλ™ λ¦¬λ‹¤μ΄λ ‰μ…)</code></p>
</li>
</ol>
<h3 id="μ •λ¦¬-1">μ •λ¦¬</h3>
<p>μ§„μ§ λ‹¨μν•κ² ETagλ§ μ„λ²„μ— λ³΄λ‚΄μ„ κ°™μΌλ©΄ μ μ§€, λ‹¤λ¥΄λ©΄ λ‹¤μ‹ λ°›κΈ°!</p>
<p><code>μΊμ‹ μ μ–΄ λ΅μ§μ„ μ„λ²„μ—μ„ μ™„μ „ν κ΄€λ¦¬</code></p>
<p>ν΄λΌμ΄μ–ΈνΈλ” λ‹¨μν μ΄ κ°’μ„ μ„λ²„μ— μ κ³µ<code>(ν΄λΌμ΄μ–ΈνΈλ” μΊμ‹ λ©”μ»¤λ‹μ¦μ„ λ¨λ¦„)</code></p>
<h1 id="ν”„λ΅μ‹-μΊμ‹">ν”„λ΅μ‹ μΊμ‹</h1>
<aside>
π’΅ ν΄λΌμ΄μ–ΈνΈκ°€ λ§¤λ² Origin μ„λ²„μ— λ°μ΄ν„°λ¥Ό μ”μ²­ν•λ” κ²ƒμ€ λΉ„ν¨μ¨μ  β‡’ ν”„λ΅μ‹ μΊμ‹ μ‚¬μ©

</aside>

<blockquote>
<p><code>Cache-Control: public</code> μ‘λ‹µμ΄ public μΊμ‹μ— μ €μ¥λμ–΄λ„ λ¨</p>
<p><code>Cache-Control: private</code> μ‘λ‹µμ΄ ν•΄λ‹Ή μ‚¬μ©μλ§μ„ μ„ν• κ²ƒμ„, private μΊμ‹μ— μ €μ¥ν•΄μ•Ό ν•¨(κΈ°λ³Έκ°’)</p>
</blockquote>
<p><img alt="" src="https://velog.velcdn.com/images/sjhgd107/post/8e15d015-090a-41b4-a0c4-e9d83c57ff78/image.png" /></p>
<h1 id="μΊμ‹-λ¬΄ν¨ν™”">μΊμ‹ λ¬΄ν¨ν™”</h1>
<aside>
π’΅ μ”μ²­μ΄ μ—†λ”λΌλ„ λΈλΌμ°μ €κ°€ μ„μλ΅ μΊμ‹ν•λ” κ²½μ°κ°€ μλ‹¤

<p>β‡’ μΊμ‹λμ§€ μ•μ•„μ•Ό ν•λ” μ •λ³΄λ¥Ό μ”μ²­ν•λ” κ²½μ° μ•„λμ ν—¤λ”λ¥Ό μ‚¬μ©ν•μ—¬ μΊμ‹λ¥Ό λ¬΄ν¨ν™” ν•λ‹¤</p>
</aside>

<blockquote>
<p><code>Cache-Control</code>: no-cache, no-store, must-revalidate</p>
<p><code>Pragma</code>: no-cache</p>
</blockquote>
<h2 id="no-cache-vs-must-revalidate">no-cache VS must-revalidate</h2>
<p><strong>no-cache, no-storeλ¥Ό μ‚¬μ©ν•λ©΄ μ¶©λ¶„ν•  κ²ƒ κ°™μ€λ° must-revalidateκΉμ§€ μ‚¬μ©ν•λ” μ΄μ λ”?</strong></p>
<p>no-cacheλ” ν•­μƒ Origin μ„λ²„μ— μΊμ‹λ¥Ό κ²€μ¦ν•κ³  μ‚¬μ©ν•λ‹¤.</p>
<p>Clientμ™€ Origin μ„λ²„ μ‚¬μ΄μ Proxy μ„λ²„μ—μ„ λ„¤νΈμ›ν¬ λ‹¨μ  λ“±μ μ΄μ λ΅ Origin μ„λ²„μ— μ ‘κ·Όν•  μ μ—†λ” μƒν™© λ°μƒ μ‹, μ¤λ¥κ°€ λ°μƒν•μ§€ μ•κ³  μ¤λλ μΊμ‹ λ°μ΄ν„°λ¥Ό λ³΄λ‚΄μ£Όλ” κ²½μ°κ°€ μλ‹¤.</p>
<p><code>(μ¤λ¥ λ³΄λ‹¤λ” μ¤λλ λ°μ΄ν„°λΌλ„ μ „μ†΅ν•λ” κ²ƒμ΄ λ‚«λ‹¤λ” λ‚΄λ¶€ λ§¤μ»¤λ‹μ¦μ— μν•΄)</code></p>
<p>must-revalidate ν—¤λ” μ‚¬μ© μ‹, Origin μ„λ²„μ— μ ‘κ·Όν•  μ μ—†λ” κ²½μ° <code>ν•­μƒ μ¤λ¥</code>κ°€ λ°μƒν•κ² λλ―€λ΅ μ™„μ „ν• μΊμ‹ λ¬΄ν¨ν™”λ¥Ό κµ¬ν„ν•  μ μλ‹¤.</p>